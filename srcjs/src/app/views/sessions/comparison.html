<md-toolbar>
  <div class="md-toolbar-tools">
    <h3>{{ActiveDuplicate.SourceDisplayName}}  (ID: {{ActiveDuplicate.SourceId}})</h3>
    <span flex></span>
    <md-button ng-click="doReview()" ng-disabled="ActiveDuplicate.SourceStatus > 0">
      <md-icon ng-class="[md-light, review, {'md-inactive': ActiveDuplicate.SourceStatus > 0}]">check_circle</md-icon>
      {{ActiveDuplicate.SourceStatus == 1 ? 'Reviewed' : 'Review'}}
    </md-button>
    <md-button ng-click="doProcessing()" ng-disabled="selectedTarget == null || ActiveDuplicate.SourceStatus == 2">
      <md-icon ng-class="[md-light, process, {'md-inactive': selectedTarget == null || ActiveDuplicate.SourceStatus == 2}]">send</md-icon>
      {{ActiveDuplicate.SourceStatus == 2 ? 'Processed' : 'Process'}}
    </md-button>
  </div>
</md-toolbar>
<md-content id="session-comparison-result-box" flex layout="row" layout-align="center">
  <md-content flex class="scrollable">
    <table class="bordered" id="session-comparison-table">
      <thead>
        <tr>
          <th>Field Name</th>
          <th>Source: <md-button class="md-primary" ng-click="doItemClick(Source.ExternalId)">{{Source.Name}}</md-button></th>

          <th ng-repeat="target in Targets" class="target">
            <div layout="row" layout-align="space-between center">
              <span>
                Match {{$index + 1}}: <md-button class="md-primary" ng-click="doItemClick(target.ExternalId)">{{target.Name}}</md-button>
              </span>
            </div>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td colspan="{{Targets.length + 2}}">
            <md-content layout="row">
              <md-input-container style="width:30%">
                <label>Select a target record for processing</label>
                <md-select ng-model="selectedTarget">
                  <md-option ng-repeat="target in Targets" value="{{$index}}">Match {{$index + 1}}: {{target.Name}}</md-option>
                </md-select>
              </md-input-container>
              <md-input-container style="width:70%">
                <label>Notes</label>
                <textarea maxlength="1000" ng-disabled="ActiveDuplicate.SourceStatus == 2" ng-model="ActiveDuplicate.Notes"></textarea>
              </md-input-container>
            </md-content>
          </td>
        </tr>
        <tr ng-repeat="field in FieldNames">
          <td>{{field}}</td>
          <td>{{Source.Values[$index]}}</td>
          <td ng-repeat="target in $parent.Targets" ng-class="areEqual($parent.$index, $index) ? '': 'negative'">
            {{target.Values[$parent.$index]}}
          </td>
        </tr>
      </tbody>
    </table>
  </md-content>
</md-content>